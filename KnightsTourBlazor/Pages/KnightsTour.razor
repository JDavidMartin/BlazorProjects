@page "/KnightsTour"
@using KnightsTourBlazor.Data.KnightsTour;
@inject KnightsTourGame KnightsTourGame;

<h1>Knights Tour Goes Here</h1>

<button @onclick="ResetBoard">Reset Board</button>
<h1>@startingSquare</h1>
<h3>@numberOfMoves Moves Made</h3>
<div class="chessboard">
    <div class="chessboardRow">
        <button class="chessboardSquare" id="0,7" @onclick="@(() => SquareClick("0,7"))">@Squares[0, 7]</button>
        <button class="chessboardSquare" id="1,7" @onclick="@(() => SquareClick("1,7"))">@Squares[1, 7]</button>
        <button class="chessboardSquare" id="2,7" @onclick="@(() => SquareClick("2,7"))">@Squares[2, 7]</button>
        <button class="chessboardSquare" id="3,7" @onclick="@(() => SquareClick("3,7"))">@Squares[3, 7]</button>
        <button class="chessboardSquare" id="4,7" @onclick="@(() => SquareClick("4,7"))">@Squares[4, 7]</button>
        <button class="chessboardSquare" id="5,7" @onclick="@(() => SquareClick("5,7"))">@Squares[5, 7]</button>
        <button class="chessboardSquare" id="6,7" @onclick="@(() => SquareClick("6,7"))">@Squares[6, 7]</button>
        <button class="chessboardSquare" id="7,7" @onclick="@(() => SquareClick("7,7"))">@Squares[7, 7]</button>
    </div>
    <div class="chessboardRow">
        <button class="chessboardSquare" id="0,6" @onclick="@(() => SquareClick("0,6"))">@Squares[0, 6]</button>
        <button class="chessboardSquare" id="1,6" @onclick="@(() => SquareClick("1,6"))">@Squares[1, 6]</button>
        <button class="chessboardSquare" id="2,6" @onclick="@(() => SquareClick("2,6"))">@Squares[2, 6]</button>
        <button class="chessboardSquare" id="3,6" @onclick="@(() => SquareClick("3,6"))">@Squares[3, 6]</button>
        <button class="chessboardSquare" id="4,6" @onclick="@(() => SquareClick("4,6"))">@Squares[4, 6]</button>
        <button class="chessboardSquare" id="5,6" @onclick="@(() => SquareClick("5,6"))">@Squares[5, 6]</button>
        <button class="chessboardSquare" id="6,6" @onclick="@(() => SquareClick("6,6"))">@Squares[6, 6]</button>
        <button class="chessboardSquare" id="7,6" @onclick="@(() => SquareClick("7,6"))">@Squares[7, 6]</button>
    </div>
    <div class="chessboardRow">
        <button class="chessboardSquare" id="0,5" @onclick="@(() => SquareClick("0,5"))">@Squares[0, 5]</button>
        <button class="chessboardSquare" id="1,5" @onclick="@(() => SquareClick("1,5"))">@Squares[1, 5]</button>
        <button class="chessboardSquare" id="2,5" @onclick="@(() => SquareClick("2,5"))">@Squares[2, 5]</button>
        <button class="chessboardSquare" id="3,5" @onclick="@(() => SquareClick("3,5"))">@Squares[3, 5]</button>
        <button class="chessboardSquare" id="4,5" @onclick="@(() => SquareClick("4,5"))">@Squares[4, 5]</button>
        <button class="chessboardSquare" id="5,5" @onclick="@(() => SquareClick("5,5"))">@Squares[5, 5]</button>
        <button class="chessboardSquare" id="6,5" @onclick="@(() => SquareClick("6,5"))">@Squares[6, 5]</button>
        <button class="chessboardSquare" id="7,5" @onclick="@(() => SquareClick("7,5"))">@Squares[7, 5]</button>
    </div>
    <div class="chessboardRow">
        <button class="chessboardSquare" id="0,4" @onclick="@(() => SquareClick("0,4"))">@Squares[0, 4]</button>
        <button class="chessboardSquare" id="1,4" @onclick="@(() => SquareClick("1,4"))">@Squares[1, 4]</button>
        <button class="chessboardSquare" id="2,4" @onclick="@(() => SquareClick("2,4"))">@Squares[2, 4]</button>
        <button class="chessboardSquare" id="3,4" @onclick="@(() => SquareClick("3,4"))">@Squares[3, 4]</button>
        <button class="chessboardSquare" id="4,4" @onclick="@(() => SquareClick("4,4"))">@Squares[4, 4]</button>
        <button class="chessboardSquare" id="5,4" @onclick="@(() => SquareClick("5,4"))">@Squares[5, 4]</button>
        <button class="chessboardSquare" id="6,4" @onclick="@(() => SquareClick("6,4"))">@Squares[6, 4]</button>
        <button class="chessboardSquare" id="7,4" @onclick="@(() => SquareClick("7,4"))">@Squares[7, 4]</button>
    </div>
    <div class="chessboardRow">
        <button class="chessboardSquare" id="0,3" @onclick="@(() => SquareClick("0,3"))">@Squares[0, 3]</button>
        <button class="chessboardSquare" id="1,3" @onclick="@(() => SquareClick("1,3"))">@Squares[1, 3]</button>
        <button class="chessboardSquare" id="2,3" @onclick="@(() => SquareClick("2,3"))">@Squares[2, 3]</button>
        <button class="chessboardSquare" id="3,3" @onclick="@(() => SquareClick("3,3"))">@Squares[3, 3]</button>
        <button class="chessboardSquare" id="4,3" @onclick="@(() => SquareClick("4,3"))">@Squares[4, 3]</button>
        <button class="chessboardSquare" id="5,3" @onclick="@(() => SquareClick("5,3"))">@Squares[5, 3]</button>
        <button class="chessboardSquare" id="6,3" @onclick="@(() => SquareClick("6,3"))">@Squares[6, 3]</button>
        <button class="chessboardSquare" id="7,3" @onclick="@(() => SquareClick("7,3"))">@Squares[7, 3]</button>
    </div>
    <div class="chessboardRow">
        <button class="chessboardSquare" id="0,2" @onclick="@(() => SquareClick("0,2"))">@Squares[0, 2]</button>
        <button class="chessboardSquare" id="1,2" @onclick="@(() => SquareClick("1,2"))">@Squares[1, 2]</button>
        <button class="chessboardSquare" id="2,2" @onclick="@(() => SquareClick("2,2"))">@Squares[2, 2]</button>
        <button class="chessboardSquare" id="3,2" @onclick="@(() => SquareClick("3,2"))">@Squares[3, 2]</button>
        <button class="chessboardSquare" id="4,2" @onclick="@(() => SquareClick("4,2"))">@Squares[4, 2]</button>
        <button class="chessboardSquare" id="5,2" @onclick="@(() => SquareClick("5,2"))">@Squares[5, 2]</button>
        <button class="chessboardSquare" id="6,2" @onclick="@(() => SquareClick("6,2"))">@Squares[6, 2]</button>
        <button class="chessboardSquare" id="7,2" @onclick="@(() => SquareClick("7,2"))">@Squares[7, 2]</button>
    </div>
    <div class="chessboardRow">
        <button class="chessboardSquare" id="0,1" @onclick="@(() => SquareClick("0,1"))">@Squares[0, 1]</button>
        <button class="chessboardSquare" id="1,1" @onclick="@(() => SquareClick("1,1"))">@Squares[1, 1]</button>
        <button class="chessboardSquare" id="2,1" @onclick="@(() => SquareClick("2,1"))">@Squares[2, 1]</button>
        <button class="chessboardSquare" id="3,1" @onclick="@(() => SquareClick("3,1"))">@Squares[3, 1]</button>
        <button class="chessboardSquare" id="4,1" @onclick="@(() => SquareClick("4,1"))">@Squares[4, 1]</button>
        <button class="chessboardSquare" id="5,1" @onclick="@(() => SquareClick("5,1"))">@Squares[5, 1]</button>
        <button class="chessboardSquare" id="6,1" @onclick="@(() => SquareClick("6,1"))">@Squares[6, 1]</button>
        <button class="chessboardSquare" id="7,1" @onclick="@(() => SquareClick("7,1"))">@Squares[7, 1]</button>
    </div>
    <div class="chessboardRow">
        <button class="chessboardSquare" id="0,0" @onclick="@(() => SquareClick("0,0"))">@Squares[0, 0]</button>
        <button class="chessboardSquare" id="1,0" @onclick="@(() => SquareClick("1,0"))">@Squares[1, 0]</button>
        <button class="chessboardSquare" id="2,0" @onclick="@(() => SquareClick("2,0"))">@Squares[2, 0]</button>
        <button class="chessboardSquare" id="3,0" @onclick="@(() => SquareClick("3,0"))">@Squares[3, 0]</button>
        <button class="chessboardSquare" id="4,0" @onclick="@(() => SquareClick("4,0"))">@Squares[4, 0]</button>
        <button class="chessboardSquare" id="5,0" @onclick="@(() => SquareClick("5,0"))">@Squares[5, 0]</button>
        <button class="chessboardSquare" id="6,0" @onclick="@(() => SquareClick("6,0"))">@Squares[6, 0]</button>
        <button class="chessboardSquare" id="7,0" @onclick="@(() => SquareClick("7,0"))">@Squares[7, 0]</button>
    </div>
</div>

@code  {
    string startingSquare;
    string[,] Squares = new string[8, 8];
    string numberOfMoves = "0";

    void SquareClick(string squareId)
    {
        startingSquare = squareId;
        var x = int.Parse(squareId.Substring(0, 1));
        var y = int.Parse(squareId.Substring(2, 1));
        var tourData = KnightsTourGame.TourTheBoard(x, y);

        Squares = tourData.MovesArray;
        numberOfMoves = (tourData.NumberMoves + 1).ToString();
    }

    void ResetBoard()
    {
        startingSquare = "";
        numberOfMoves = "0";
        Squares = new string[8, 8];
    }
}
